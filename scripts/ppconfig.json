{"name":"xsxys","url":"https://www.sunnafh.com/","showName":"新视讯影视","appid":"com.xsxys.app","icon":"","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":false,"version":"0.0.1","preview":"desktop","platform":["1-1"],"width":800,"height":600,"desc":"","jsFile":[],"filterCss":"","customJs":"console.log(\n    '%cbuild from PakePlus： https://github.com/Sjj1024/PakePlus',\n    'color:orangered;font-weight:bolder'\n)\n\n// 本地缓存管理\nconst CacheManager = {\n    prefix: 'pakeplus_',\n    \n    // 初始化缓存\n    init() {\n        try {\n            // 检查本地存储是否可用\n            const testKey = this.prefix + 'test';\n            localStorage.setItem(testKey, 'test');\n            localStorage.removeItem(testKey);\n            return true;\n        } catch (e) {\n            console.error('本地存储不可用:', e);\n            return false;\n        }\n    },\n    \n    // 获取完整键名\n    getFullKey(key) {\n        return this.prefix + key;\n    },\n    \n    // 存储数据到缓存\n    set(key, value, expiresInSeconds = 86400) {\n        try {\n            const fullKey = this.getFullKey(key);\n            const data = {\n                value,\n                expiresAt: Date.now() + (expiresInSeconds * 1000)\n            };\n            localStorage.setItem(fullKey, JSON.stringify(data));\n            return true;\n        } catch (e) {\n            console.error('存储缓存失败:', e);\n            return false;\n        }\n    },\n    \n    // 从缓存读取数据\n    get(key) {\n        try {\n            const fullKey = this.getFullKey(key);\n            const data = localStorage.getItem(fullKey);\n            \n            if (!data) return null;\n            \n            const parsed = JSON.parse(data);\n            // 检查是否过期\n            if (parsed.expiresAt && parsed.expiresAt < Date.now()) {\n                this.remove(key);\n                return null;\n            }\n            \n            return parsed.value;\n        } catch (e) {\n            console.error('读取缓存失败:', e);\n            return null;\n        }\n    },\n    \n    // 从缓存删除数据\n    remove(key) {\n        try {\n            const fullKey = this.getFullKey(key);\n            localStorage.removeItem(fullKey);\n            return true;\n        } catch (e) {\n            console.error('删除缓存失败:', e);\n            return false;\n        }\n    },\n    \n    // 清除所有缓存\n    clearAll() {\n        try {\n            const prefixLength = this.prefix.length;\n            for (let i = localStorage.length - 1; i >= 0; i--) {\n                const key = localStorage.key(i);\n                if (key && key.substring(0, prefixLength) === this.prefix) {\n                    localStorage.removeItem(key);\n                }\n            }\n            return true;\n        } catch (e) {\n            console.error('清除缓存失败:', e);\n            return false;\n        }\n    }\n};\n\n// 初始化缓存管理器\nconst isCacheAvailable = CacheManager.init();\nconsole.log('本地缓存状态:', isCacheAvailable ? '可用' : '不可用');\n\n// very important, if you don't know what it is, don't touch it\n// 非常重要，不懂代码不要动，这里可以解决80%的问题，也可以生产1000+的bug\nconst hookClick = (e) => {\n    const origin = e.target.closest('a')\n    const isBaseTargetBlank = document.querySelector(\n        'head base[target=\"_blank\"]'\n    )\n    console.log('origin', origin, isBaseTargetBlank)\n    if (\n        (origin && origin.href && origin.target === '_blank') ||\n        (origin && origin.href && isBaseTargetBlank)\n    ) {\n        e.preventDefault()\n        console.log('handle origin', origin)\n        \n        // 示例：在跳转前缓存当前页面信息\n        CacheManager.set('last_page', window.location.href);\n        \n        location.href = origin.href\n    } else {\n        console.log('not handle origin', origin)\n    }\n}\n\nwindow.open = function (url, target, features) {\n    console.log('open', url, target, features)\n    \n    // 示例：缓存新打开的URL\n    CacheManager.set('last_opened_url', url);\n    \n    location.href = url\n}\n\ndocument.addEventListener('click', hookClick, { capture: true })\n\n// 页面加载时检查缓存\ndocument.addEventListener('DOMContentLoaded', () => {\n    const lastPage = CacheManager.get('last_page');\n    const lastOpenedUrl = CacheManager.get('last_opened_url');\n    \n    if (lastPage) {\n        console.log('上次访问的页面:', lastPage);\n    }\n    \n    if (lastOpenedUrl) {\n        console.log('上次打开的链接:', lastOpenedUrl);\n    }\n    \n    // 示例：缓存页面加载时间\n    CacheManager.set('page_load_time', new Date().toISOString(), 3600);\n});","isHtml":false,"htmlPath":"","htmlFiles":[],"more":{"windows":{"label":"xsxys","title":"新视讯影视","url":"https://www.sunnafh.com/","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36","width":800,"height":600,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false}},"phone":{"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]},"webview":{"userAgent":"","javaScriptEnabled":true,"domStorageEnabled":true,"allowFileAccess":true,"loadWithOverviewMode":true,"setSupportZoom":true,"clearCache":true}},"ios":{"name":"xsxys","showName":"新视讯影视","version":"0.0.1","webUrl":"https://www.sunnafh.com/","id":"com.xsxys.app.ios","icon":"./app-icon.png","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false},"android":{"name":"xsxys","showName":"新视讯影视","version":"0.0.1","webUrl":"https://www.sunnafh.com/","id":"com.xsxys.app.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途）","isHtml":false,"debug":false},"desktop":{"name":"xsxys","showName":"新视讯影视","version":"0.0.1","id":"com.xsxys.app.desktop","desc":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途，否则后果自负）","webUrl":"https://www.sunnafh.com/","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"Package for personal use only, please do not use for commercial purposes（打包仅限个人使用，请勿传播或商业用途，否则后果自负）","isHtml":false,"single":true,"state":true,"injectJq":false,"tauriApi":false,"buildMethod":"cloud","debug":false}}